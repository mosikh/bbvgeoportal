<!doctype html>
<html lang="en">

<head>

<meta charset="utf-8">
<title>BBV Geoportal</title>
<!-- <link rel="stylesheet" type="text/css" href="./public/set.css"> -->
<link rel="stylesheet" type="text/css" href="./set.css">
<!-- <link rel="icon" href="./img/un.svg.png"> -->

<meta name="viewport" content="width=device-width, initial-scale=1.0">
      <script
        src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous">
      </script>
	      <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" integrity="sha512-s+xg36jbIujB2S2VKfpGmlC3T5V2TF3lY48DX7u2r9XzGzgPsa6wTpOQA7J9iffvdeBN0q9tKzRxVxw1JviZPg==" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@0.7.0"></script>
	  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"> 
	  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
	  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script></head>
      <!-- <link rel="stylesheet" type="text/css" href="dashboard.css"> -->


 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
   integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
   crossorigin=""></script>
   
   <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.1/leaflet.js"></script>
   
   <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
	<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script> 
  

   <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />

  <script src="https://unpkg.com/leaflet-sidebar"></script>
  <link type="text/css" rel="stylesheet" href="https://unpkg.com/leaflet-sidebar/src/L.Control.Sidebar.css"/>
  
  <!-- <script type="text/javascript" src="./lib/L.Control.Sidebar.js"></script> -->
  <!-- <link type="text/css" rel="stylesheet" href="./lib/L.Control.Sidebar.css" /> -->
  
  

<!-- <script src="./node_modules/leaflet.browser.print/dist/leaflet.browser.print.min.js"></script> -->
<script src="https://unpkg.com/leaflet.browser.print/dist/leaflet.browser.print.min.js"></script>

<!-- <script src="./Leaflet.Coordinates-master/dist/Leaflet.Coordinates-0.1.5.min.js"></script> -->
<script src="https://unpkg.com/leaflet.coordinates/dist/Leaflet.Coordinates-0.1.5.min.js"></script>

<!-- <script src="./node_modules/utm-latlng/UTMLatLng"></script> -->
<!-- <script src="./node_modules/proj4leaflet/lib/proj4.js"></script>  -->
<!-- <script src="./node_modules/proj4leaflet/src/proj4leaflet.js"></script> -->


<!-- <script src="https://unpkg.com/utm-latlng/UTMLatLng"></script> -->
<!-- <script src="https://unpkg.com/proj4leaflet/lib/proj4.js"></script>  -->
<!-- <script src="https://unpkg.com/proj4leaflet/src/proj4leaflet.js"></script> -->



<!-- <script src="./node_modules/leaflet.markercluster/dist/leaflet.markercluster.js"></script> -->
<script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

<!-- <link rel="stylesheet" href="./node_modules/leaflet.markercluster/dist/MarkerCluster.css" /> -->
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />

<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />


<!-- <script src="./node_modules/leaflet-measure/dist/leaflet-measure.de.js"></script> -->
<script src="https://unpkg.com/leaflet-measure/dist/leaflet-measure.de.js"></script>

<!-- <link rel="stylesheet" href="./node_modules/leaflet-measure/dist/leaflet-measure.css" /> -->
<link rel="stylesheet" href="https://unpkg.com/leaflet-measure/dist/leaflet-measure.css" />


<!-- <script src="./lib/L.Control.Button.js"></script> -->
<!-- <script src="https://github.com/jerroydmoore/leaflet-button/blob/master/L.Control.Button.js"></script> -->
<!-- <script src="https://unpkg.com/L.Control.Button.js"></script> -->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
<script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>


<!-- <script src="./node_modules/leaflet-draw/dist/leaflet.draw.js"></script> -->
<!-- <link rel="stylesheet" href="./node_modules/leaflet-draw/dist/leaflet.draw.css"/> -->

<script src="https://unpkg.com/leaflet-draw/dist/leaflet.draw.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet-draw/dist/leaflet.draw.css"/>

<!-- <script src="http://requirejs.org/docs/release/2.3.1/minified/require.js"></script> -->

 
<!-- <script src="http://localhost:3000/users"></script> -->
<!-- <script src="./geojson/ausbau.geojson"></script> -->
<!-- <script src="./geojson/standort.geojson"></script> -->

<!-- <script src="./queries.js"></script> -->

<script src="https://cdn.jsdelivr.net/npm/leaflet.control.layers.tree@1.1.0/L.Control.Layers.Tree.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.control.layers.tree@1.1.0/L.Control.Layers.Tree.min.css">


<script src="https://cdn.jsdelivr.net/npm/leaflet-layer-tree@1.0.0/src/L.LayerTreeControl.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-layer-tree@1.0.0/src/L.LayerTreeControl.min.css">
</head>

<body>

<div class="container-fluid">
	<nav class="navbar navbar-expand-sm bg-success" style="height:5vh;background-color: #000080 !important;">
		<div class="container-fluid ">
			<a class="navbar-brand ms-auto">
				<!-- <img src="http://localhost:3000/IFN_Header.svg" width="50" height="50"  alt=""> -->
				<img src="https://bbvnewgeoportal.onrender.com/IFN_Header.svg" width="50" height="50"  alt="">
				Backoffice Portal Adressdaten NOK
			</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse " id="navbarSupportedContent">
				<ul class="navbar-nav ms-auto">
					<li class="nav-item">
						<a class="nav-link active" href="index.html">Administration</a>
					</li>
				</ul>
			</div>
		</div>		
	</nav>
			
	<div id="map" class="row" style="height:95vh;">
	</div>
</div>





<div id="sidebar">
	<div class="tab">
		<button class="tablinks" onclick="opentabs(event, 'Layers')" id="defaulttab">Layers</button>
		<button class="tablinks" onclick="opentabs(event, 'Information')">Information</button>
		<button class="tablinks" onclick="opentabs(event, 'Permalink')">Permalink</button>
		<button class="tablinks" onclick="opentabs(event, 'Projects')">Projects</button>
	</div>
	
	<div id="Layers" class="tabcontent">
		<div class="layerbox">
			<!-- <input type="checkbox" class="check" id="standort" checked>Standorte<br> -->
			<!-- <input type="checkbox" class="check" id="ausbau" checked>Ausbaugebiete<br> -->
			<!-- <input type="checkbox" class="check" id="gemeinden" checked>Clustergemeinden<br> -->

		</div>
	<hr class="line">
	<p>Base Layer</p>
		<select id="basetiles" onchange="changebase()">
			<option value="osm" selected > Open Street Map</option>
			<option value="google"> Google Satellit</option>
			<option value="carto"> TopPlusOpen - Web Grau</option>
		</select>
	</div>
	
	<div id="Information" class="tabcontent">
		<h3>Paris</h3>
		<p>Paris is the capital of France.</p>
	</div>

	<div id="Permalink" class="tabcontent">
		<h3>Tokyo</h3>
		<p>Tokyo is the capital of Japan.</p>
	</div>
	
	<div id="Projects" class="tabcontent">
		<div id="keke"></div>
		<h3>Projects</h3>
		<p>Projects is the capital of Japan.</p>
	</div>
</div>




<script>


var map = L.map('map').setView([49.510208, 9.312286], 10);


var baselayers  = {
	"osm" : L.tileLayer( 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
    subdomains: ['a','b','c']}) ,
	
	"google": L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
    maxZoom: 20,
    subdomains:['mt0','mt1','mt2','mt3'] }),
	
	"carto" : L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
	maxZoom: 19})
};

var currentbase = baselayers["osm"]
currentbase.addTo(map);



var sidebar = L.control.sidebar('sidebar', {
            closeButton: false,
            position: 'left'
        });
map.addControl(sidebar);

setTimeout(function () {
            sidebar.show();
        }, 500);
		
		



// $(".legend-container").append( $("#legend") );
// $(".legend-toggle").append( "<i class='legend-toggle-icon fa fa-info fa-2x' style='color: #000'></i>" );



 //$(document).ready(function() {
  //          $('#transparent').change(function() {
  //              $('.op').attr('style', 'opacity:' + $('#transparent').attr('value')/100);
 //           });
//    });



function changebase(){
	let baseclick = document.getElementById("basetiles").value
	    map.removeLayer(currentbase);
        map.addLayer(baselayers[baseclick]) 
	    currentbase = baselayers[baseclick]
}

//--------------------------------------------------------------------------------------------
options ={
collapsed: false,
errorMessage: "Nothing found...",
showResultIcons: false,
geocoder: new L.Control.Geocoder.Nominatim(),
suggestMinLength: 3,
queryMinLength: 1
}
L.Control.geocoder(options).addTo(map);

//------------------------------------------------------------------------------------------
options ={
position: 'topleft', 
title: 'Print ...',
printModes: [
        L.BrowserPrint.Mode.Landscape("A4",{title: "Landscape"}),
		L.BrowserPrint.Mode.Portrait("A4",{title: "Portrait"}),
		L.BrowserPrint.Mode.Auto("A4",{title: "Auto"}),
		L.BrowserPrint.Mode.Custom("A4",{title: "Custom", margin:0 ,header: {enabled:true, text:"hhhhhhhhhhhhhhhhhhhhhhhhhhhhh",size:"10mm",overTheMap:true}})
	],
}
L.control.browserPrint(options).addTo(map);

//$('#keke').append(L.control.browserPrint(options).onAdd(map))
//---------------------------------------------------------------------------------------

map.on('click', function(e){
  var coord = e.latlng;
  var lat = coord.lat;
  var lng = coord.lng;
  console.log("You clicked the map at latitude: " + lat + " and longitude: " + lng);
  });

L.control.coordinates({
	position:"bottomleft", //optional default "bootomright"
	decimals:6, //optional default 4
	decimalSeperator:",", //optional default "."
	labelTemplateLat:"Latitude: {y}", //optional default "Lat: {y}"
	labelTemplateLng:"Longitude: {x}", //optional default "Lng: {x}"
	enableUserInput:false, //optional default true
	useDMS:false, //optional default false
	useLatLngOrder: true, //ordering of labels, default false-> lng-lat
	//markerType: L.marker, //optional default L.marker
	markerProps: {title: "MyLocation",}, //optional default {},
	labelFormatterLng : function(lng){return lng+" lng"}, //optional default none,
	labelFormatterLat : function(lat){return lat+" lat"}, //optional default none
	customLabelFcn: function(latLonObj, opts) { "Geohash: " + encodeGeoHash(latLonObj.lat, latLonObj.lng)} //optional default none
}).addTo(map);

// var theMarker = {};

//  map.on('click',function(e){
 //   lat = e.latlng.lat;
  //  lon = e.latlng.lng;
 

    //    if (theMarker != undefined) {
   //           map.removeLayer(theMarker);
    //    };


    //Add a marker to show where you clicked.
  //   theMarker = L.marker([lat,lon]).addTo(map);  
//	 theMarker.bindPopup("Latitude: "+ lat+" \n Longitude: "+lon);
//}); 


//----------------------------------------------------------------------------------
//var domain = "http://localhost:3000"
var domain = "https://bbvnewgeoportal.onrender.com"

var markers;
   
$.ajax({url:domain+'/get-layer/BBVCRMMirror/point/crm_nok_gee_mirror',
	success: function(response){
		jsnEagles = JSON.parse(response);
		lyrTest = L.geoJSON(jsnEagles,{
		pointToLayer: function (feature, latlng) {
		
		var colorToUse;
		var city = feature.properties["Liegenschaft - Ort"];
        
		if (city === "Adelsheim") colorToUse = "#46C7FA";
		else if (city === "Aglasterhausen") colorToUse = "#E81D1A";
		else if (city === "Fahrenbach") colorToUse = "#4161BA";
		else if (city === "Mudau") colorToUse = "#599C65";
		else if (city === "Rosenberg") colorToUse = "#65018A";
		else colorToUse = "#000000";
            
		var hpstyle = {
			radius: 5,
			fillColor: colorToUse,
			color: "#000",
			weight: 1,
			opacity: 1,
			fillOpacity: 0.8
		};

        return L.circleMarker(latlng, hpstyle);
		}
		});
		markers = L.markerClusterGroup({
		spiderfyOnMaxZoom: true,
		showCoverageOnHover: false,
		zoomToBoundsOnClick: true,
		removeOutsideVisibleBounds: true,
		disableClusteringAtZoom: 18
		});
		markers.addLayer(lyrTest);
		
		markers.on('add', function() {
			console.log('The custom layer has been added to the map!');
		});		
		map.addLayer(markers);
		
			
	},
		error: function (xhr,status, error){
		alert("ERROR: " + error);
	}
	
});

$(".layerbox").append('<ul id="mainstandort" class=ocbutton>');
$("#mainstandort").append('<li><span class="caret"><input type="checkbox" class="check" name="markers" id="standort"  checked>Standorte</span>');
//var cities = ["Adelsheim","Aglasterhausen","Fahrenbach","Mudau","Rosenberg"];
//for (var i = 0; i < cities.length; i++) {
//	$("#mainstandort li").append('<ul class="nested">')
//	$("#mainstandort ul").append('<li><input type="checkbox" class="subcheck" style="margin-left:25px;" checked>'+cities[i]+'</li>')
//}
$('head').append("<style>#mainstandort .caret:before { color:#4169e1; }</style>");




$(".layerbox").append('<ul id="maingemeinden" class=ocbutton>');
$("#maingemeinden").append('<li><span class="caret"><input type="checkbox" class="check" id="gemeinden"  checked>Clustergemeinden</span>');
   
$.ajax({url:domain+'/get-layer/Sandbox4test_mh/polygon/"Clustergemeinden NOK V1 05.05.20"',
	success: function(response){
		jsnpolys = JSON.parse(response);
		lyrgem = L.geoJSON(jsnpolys).addTo(map);
		map.fitBounds(lyrgem.getBounds());
		},
		error: function (xhr,status, error){
		alert("ERROR: " + error);
	}
});


//var cities = ["Adelsheim","Aglasterhausen","Fahrenbach","Mudau","Rosenberg"];

<!-- for (var i = 0; i < cities.length; i++) { -->
	<!-- $("#maingemeinden li").append('<ul class="nested">') -->
	<!-- $("#maingemeinden ul").append('<li><input type="checkbox"  class="subcheck" style="margin-left:25px;" checked>'+cities[i]+'</li>') -->
<!-- } -->
$('head').append("<style>#maingemeinden .caret:before { color:#4169e1; }</style>");



var lyrpoly;
$.ajax({url:domain+'/get-layer/Sandbox4test_mh/polygon/"Ausbaugebiete_NOK_trial"',
	success: function(response){
		jsnpolys = JSON.parse(response);
		lyrpoly = L.geoJSON(jsnpolys, {style:{color: 'red'}}).addTo(map);
		},
		error: function (xhr,status, error){
		alert("ERROR: " + error);
	}
});

$(".layerbox").append('<ul id="mainausbau" class=ocbutton>');
$("#mainausbau").append('<li><span class="caret"><input type="checkbox" class="check" name = "lyrpoly" id="ausbau"  checked>Ausbaugebiete</span>');


var lyrline;
 $.ajax({url:domain+'/get-layer/BBVGeoMaster/line/"Bautrassen NOK 230502 Archiv"',
	success: function(response){
		jsnpolys = JSON.parse(response);
		lyrline = L.geoJSON(jsnpolys, {style:{color: '#FFEA00'}}).addTo(map);
		},
		error: function (xhr,status, error){
		alert("ERROR: " + error);
	}
});

$(".layerbox").append('<ul id="mainline" class=ocbutton>');
$("#mainline").append('<li><span class="caret"><input type="checkbox" class="check" name = "lyrline" id="line"  checked>Interpolygone</span>');
//-------------------------------------------------------------------------------------------------------testtest

<!-- function symbology (feature){ -->
	<!-- var fillColor, side=feature.properties.GEN; -->
	<!-- if (side==='Adelsheim') fillColor = '#309e2d'; -->
		<!-- else if (side==='Aglasterhausen') fillColor = '#e27f14'; -->
		<!-- else if (side==='Fahrenbach') fillColor = '#2b74eb'; -->
		<!-- else if (side==='Mudau') fillColor = '#eae42b'; -->
		<!-- else if (side==='Rosenberg') fillColor = '#552d04'; -->
		<!-- else fillColor = '#00ffff'; -->
		<!-- return { color: fillColor, weight: 3.5, opacity: 0.5 }; -->
<!-- }; -->

<!-- function popUp (feature, geojson){ -->
	<!-- var popupText="<h1 class='makebold'>Border: </h1>"+ -->
	<!-- feature.properties.AGS+"<br/>"+ -->
	<!-- "<h1 class='makebold'>Which Side</h1>"+ -->
	<!-- feature.properties.GEN; -->
	<!-- geojson.bindPopup(popupText); -->
 <!-- }; -->
 


<!-- var mysubcheck = {} -->

<!-- $.ajax({url:'http://localhost:3000/users?db=Sandbox4test_mh&shape=polygon&crm=Clustergemeinden NOK V1 05.05.20', -->
	<!-- success: function(response){ -->
	
		
		<!-- jsnpolys = JSON.parse(response); -->
		<!-- cities.forEach(function(city) { -->
		<!-- lyrgem = L.geoJson(jsnpolys, { -->
			<!-- style: symbology, -->
			<!-- onEachFeature: popUp, -->
			<!-- filter: function(feature, layer) { -->
				<!-- if ((feature.properties.GEN).includes(city)){ -->
					<!-- //return !cities.includes(feature.properties.GEN)==true; -->
					<!-- return feature.properties.GEN == city; -->
					<!-- //$("#maingemeinden li").append('<ul class="nested">'); -->
					<!-- //$("#maingemeinden ul").append('<li><input type="checkbox"  class="subcheck" style="margin-left:25px;" checked>Other cities</li>'); -->
					<!-- } -->
				<!-- //else{ -->
					<!-- //return ((feature.properties.GEN).includes(city)); -->
					<!-- //$("#maingemeinden li").append('<ul class="nested">') -->
	                <!-- //$("#maingemeinden ul").append('<li><input type="checkbox"  class="subcheck" style="margin-left:25px;" checked>'+cities[i]+'</li>') -->
					<!-- //} -->
					<!-- } -->

			
			
			<!-- }).addTo(map); -->
			<!-- mysubcheck[city] = lyrgem; -->
			<!-- $("#maingemeinden li").append('<ul class="nested">') -->
	        <!-- $("#maingemeinden ul").append('<li><input type="checkbox" value='+city+' class="subchecks" onchange="myfunc(this)" style="margin-left:25px;" checked>'+city+'</li>') -->
			<!-- //togglelayer.addOverlay(lyrgem, city); -->
			<!-- }) -->
	<!-- }, -->
		<!-- error: function (xhr,status, error){ -->
		<!-- alert("ERROR: " + error); -->
	<!-- } -->
<!-- }); -->
<!-- $('head').append("<style>#maingemeinden .caret:before { color:#4169e1; }</style>"); -->

<!-- var toggler = document.getElementsByClassName("caret"); -->
<!-- var i; -->


<!-- for (i = 0; i < toggler.length; i++) { -->
  <!-- //toggler[i].addEventListener("click", function () { -->
  <!-- $(".caret").click( function () { -->
    <!-- this.parentElement.querySelector(".nested").classList.toggle("active"); -->
    <!-- this.classList.toggle("caret-down"); -->
  <!-- }); -->
<!-- } -->

//var togglelayer = new L.control.layers(null, null,{collapsed: false}).addTo(map);
//$('#keke').append(togglelayer.onAdd(map))

//var togglelayer = L.control.layers(null, null,{collapsed: false}).addTo(map);


//$('#keke').append(L.control.browserPrint(options).onAdd(map))



//var togglelayer = L.control.layers(null, null,{collapsed: false}).addTo(map);

	

//var togglelayer = L.control.layers.tree(null, olt, {collapsed: false}).addTo(map);
//$('#keke').append(togglelayer.onAdd(map))
//

//--------------------------------------------------------------------------


function opentabs(evt, cityName) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}

document.getElementById("defaulttab").click();

//--------------------------------------------------------------------------
//var ids = ["standort", "ausbau", "gemeinden"];
//var layers = [markers,lyrpoly,lyrgem ];

$(".check").change(function() {
  var layerClicked = $(this).attr("id");

  switch (layerClicked) {
  
    case "standort":
      toggleLayer(this.checked, markers);
      break;
    case "ausbau":
      toggleLayer(this.checked, lyrpoly);
      break;
	case "gemeinden":
      toggleLayer(this.checked, lyrgem);
      break;
	case "line":
      toggleLayer(this.checked, lyrline);
      break;
      // ...and so on...
 }
});
function toggleLayer(checked, layer) {
  if (checked) {
    map.addLayer(layer);
  } else {
    map.removeLayer(layer);
  }
}


<!-- function myfunc(e) {  -->
    <!-- var layerClicked = e.value; -->
	<!-- if (e.checked == true) { -->
		<!-- map.addLayer(mysubcheck[layerClicked]); -->
    <!-- } else { -->
        <!-- map.removeLayer(mysubcheck[layerClicked]); -->
    <!-- }  -->
 <!-- }; -->


//--------------------------------------------------------------------------
options={
	position: 'topleft',
	primaryLengthUnit: 'meters', 
	secondaryLengthUnit: 'miles',
	activeColor: '#000080',
	completedColor: '#000080',
	popupOptions: { className: 'leaflet-measure-resultpopup', autoPanPadding: [10, 10] },
}

var measureControl = new L.Control.Measure(options);
measureControl.addTo(map);

//--------------------------------------------------------------------------


var drawbtn = L.easyButton({
    states: [{
            //icon:      '<img src="http://localhost:3000/4692520.png" style="width:25px" >',  
			icon:      '<img src="https://bbvnewgeoportal.onrender.com/4692520.png" style="width:25px" >', 
            title:     'Draw ...',      
			position: 'topleft',
			id: 'app',
            onClick: function() {       
                var drawer = document.getElementsByClassName('leaflet-draw')[0];
                if (drawer.style.display === 'none') {
				 drawer.style.display = "block";
                	}else {
				drawer.style.display = "none";
            	}
            }       
    }]
});

drawbtn.addTo(map);


//--------------------------------------------------------------------------

var editableLayers = new L.FeatureGroup();
map.addLayer(editableLayers);
    
var MyCustomMarker = L.Icon.extend({
	options: {
		shadowUrl: null,
		iconAnchor: new L.Point(12, 12),
		iconSize: new L.Point(24, 24),
		iconUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Map_marker.svg/512px-Map_marker.svg.png'
	}
});

var options = {
	position: 'topleft',
	draw: {
		polyline: {
			shapeOptions: {
				color: '#000080',
				clickable: true,
				weight: 10
			}
		},
		polygon: {
			allowIntersection: true, // Restricts shapes to simple polygons
			drawError: {
				color: '#e1e100', // Color the shape will turn when intersects
				message: '<strong>Oh snap!<strong> you can\'t draw that!' // Message that will show when intersect
			},
			shapeOptions: {
				clickable: true,
				color: '#000080'
			}
		},
		circle: {
			shapeOptions: {
				clickable: true,
				color: '#000080'
			}
		},
		
		rectangle: {
			shapeOptions: {
				clickable: true,
				color: '#000080'
			}
		},
		marker: {
			icon: new MyCustomMarker()
		}
	},
	edit: {
		featureGroup: editableLayers, //REQUIRED!!
		remove: true
	}
};

var drawControl = new L.Control.Draw(options);
map.addControl(drawControl);

map.on(L.Draw.Event.CREATED, function (e) {
	var type = e.layerType,
		layer = e.layer;

	if (type === 'marker') {
		layer.bindPopup('A popup!');
	}
	if (type === 'circle') {
		layer.bindPopup('A popup!');
	}

	editableLayers.addLayer(layer);
});

//---------------------------------------------------------------------
$(document).ready(function() {
$(".easy-button-container button").trigger('click');
});
//---------------------------------------------------------------------




</script>





</body>


</html>